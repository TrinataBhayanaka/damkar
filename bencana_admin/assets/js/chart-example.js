var sE = [['2013-09-01',55.311],['2013-09-02',756.641],['2013-09-03',2255.899],['2013-09-04',563.602],['2013-09-05',584.289],['2013-09-06',2008.167],['2013-09-07',178.501],['2013-09-08',73.412],['2013-09-09',437.061],['2013-09-10',290.535],['2013-09-11',449.154],['2013-09-12',204.903],['2013-09-13',723.086],['2013-09-14',295.569],['2013-09-15',1302.421],['2013-09-16',574.264],['2013-09-17',335.792],['2013-09-18',389.457],['2013-09-19',859.844],['2013-09-20',1052.293],['2013-09-21',156.482],['2013-09-22',60.577],['2013-09-23',398.331],['2013-09-24',293.222],['2013-09-25',508.159],['2013-09-26',503.971],['2013-09-27',472.728],['2013-09-28',172.334],['2013-09-29',115.576],['2013-09-30',335.827]];
var sI = [['2013-09-01',3.658],['2013-09-02',1861.041],['2013-09-03',1981.316],['2013-09-04',1526.608],['2013-09-05',869.906],['2013-09-06',667.143],['2013-09-07',144.44],['2013-09-08',59.015],['2013-09-09',1987.015],['2013-09-10',776.264],['2013-09-11',1488.448],['2013-09-12',825.398],['2013-09-13',1262.965],['2013-09-14',648.086],['2013-09-15',3.521],['2013-09-16',1316.674],['2013-09-17',1590.098],['2013-09-18',748.409],['2013-09-19',425.717],['2013-09-20',603.875],['2013-09-21',276.165],['2013-09-22',2.822],['2013-09-23',930.555],['2013-09-24',1116.66],['2013-09-25',1304.205],['2013-09-26',696.791],['2013-09-27',906.754],['2013-09-28',531.73],['2013-09-29',0],['2013-09-30',1119.535]];
var sM = [['2013-09-01',28.214],['2013-09-02',13.194],['2013-09-03',19.395],['2013-09-04',13.462],['2013-09-05',134.832],['2013-09-06',13.603],['2013-09-07',35.848],['2013-09-08',19.693],['2013-09-09',96.836],['2013-09-10',9.052],['2013-09-11',17.286],['2013-09-12',10.996],['2013-09-13',22.901],['2013-09-14',110.911],['2013-09-15',8.854],['2013-09-16',128.287],['2013-09-17',66.378],['2013-09-18',19.685],['2013-09-19',24.12],['2013-09-20',39.296],['2013-09-21',16.512],['2013-09-22',12.957],['2013-09-23',29.557],['2013-09-24',149.261],['2013-09-25',32.876],['2013-09-26',21.942],['2013-09-27',17.397],['2013-09-28',21.681],['2013-09-29',22.078],['2013-09-30',31.113]];
var sK = [['2013-09-01',107.542],['2013-09-02',319.757],['2013-09-03',501.44],['2013-09-04',408.086],['2013-09-05',320.053],['2013-09-06',1419.916],['2013-09-07',356.88],['2013-09-08',334.451],['2013-09-09',335.336],['2013-09-10',223.277],['2013-09-11',425.05],['2013-09-12',511.154],['2013-09-13',322.005],['2013-09-14',287.22],['2013-09-15',267.906],['2013-09-16',496.471],['2013-09-17',370.803],['2013-09-18',1052.365],['2013-09-19',426.125],['2013-09-20',421.988],['2013-09-21',253.648],['2013-09-22',267.611],['2013-09-23',497.106],['2013-09-24',419.662],['2013-09-25',669.067],['2013-09-26',360.494],['2013-09-27',271.958],['2013-09-28',223.843],['2013-09-29',273.94],['2013-09-30',408.871]];
var sT = [['2013-09-01',0],['2013-09-02',0],['2013-09-03',0],['2013-09-04',0],['2013-09-05',0],['2013-09-06',0],['2013-09-07',0],['2013-09-08',0],['2013-09-09',0],['2013-09-10',86],['2013-09-11',0],['2013-09-12',0],['2013-09-13',0],['2013-09-14',0],['2013-09-15',0],['2013-09-16',0],['2013-09-17',0],['2013-09-18',0],['2013-09-19',0],['2013-09-20',0],['2013-09-21',0],['2013-09-22',0],['2013-09-23',242.177],['2013-09-24',0],['2013-09-25',0],['2013-09-26',0],['2013-09-27',0],['2013-09-28',0],['2013-09-29',0],['2013-09-30',0]];
var data = [sE,sI,sM,sK,sT];

var dataset = {
	orders: [["2011-08-01",398], ["2011-08-02",255.25], ["2011-08-03",263.9], ["2011-08-04",154.24],
	["2011-08-05",210.18], ["2011-08-06",109.73], ["2011-08-07",166.91], ["2011-08-08",330.27], ["2011-08-09",546.6],
	["2011-08-10",260.5], ["2011-08-11",330.34], ["2011-08-12",464.32], ["2011-08-13",432.13], ["2011-08-14",197.78],
	["2011-08-15",311.93], ["2011-08-16",650.02], ["2011-08-17",486.13], ["2011-08-18",330.99], ["2011-08-19",504.33],
	["2011-08-20",773.12], ["2011-08-21",296.5], ["2011-08-22",280.13], ["2011-08-23",428.9], ["2011-08-24",469.75],
	["2011-08-25",628.07], ["2011-08-26",516.5], ["2011-08-27",405.81], ["2011-08-28",367.5], ["2011-08-29",492.68],
	["2011-08-30",700.79], ["2011-08-31",588.5], ["2011-09-01",511.83], ["2011-09-02",721.15], ["2011-09-03",649.62],
	["2011-09-04",653.14], ["2011-09-06",900.31], ["2011-09-07",803.59], ["2011-09-08",851.19], ["2011-09-09",2059.24],
	["2011-09-10",994.05], ["2011-09-11",742.95], ["2011-09-12",1340.98], ["2011-09-13",839.78], ["2011-09-14",1769.21],
	["2011-09-15",1559.01], ["2011-09-16",2099.49], ["2011-09-17",1510.22], ["2011-09-18",1691.72],
	["2011-09-19",1074.45], ["2011-09-20",1529.41], ["2011-09-21",1876.44], ["2011-09-22",1986.02],
	["2011-09-23",1461.91], ["2011-09-24",460.3], ["2011-09-25",392.96], ["2011-09-26",1164.85],
	["2011-09-27",746.86], ["2011-09-28",1220.28], ["2011-09-29",1617.91], ["2011-09-30",2236.63]],
 
	visitor: [["2011-08-01",796.01], ["2011-08-02",510.5], ["2011-08-03",527.8], ["2011-08-04",308.48],
	["2011-08-05",420.36], ["2011-08-06",219.47], ["2011-08-07",333.82], ["2011-08-08",660.55], ["2011-08-09",1093.19],
	["2011-08-10",521], ["2011-08-11",1660.68], ["2011-08-12",928.65], ["2011-08-13",864.26], ["2011-08-14",395.55],
	["2011-08-15",623.86], ["2011-08-16",1300.05], ["2011-08-17",1972.25], ["2011-08-18",661.98], ["2011-08-19",1008.67],
	["2011-08-20",1546.23], ["2011-08-21",493], ["2011-08-22",560.25], ["2011-08-23",357.8], ["2011-08-24",939.5],
	["2011-08-25",1256.14], ["2011-08-26",1033.01], ["2011-08-27",511.63], ["2011-08-28",735.01], ["2011-08-29",985.35],
	["2011-08-30",1401.58], ["2011-08-31",1177], ["2011-09-01",1023.66], ["2011-09-02",1442.31], ["2011-09-03",1299.24],
	["2011-09-04",1306.29], ["2011-09-06",1800.62], ["2011-09-07",1607.18], ["2011-09-08",1702.38],
	["2011-09-09",4118.48], ["2011-09-10",1988.11], ["2011-09-11",1485.89], ["2011-09-12",2681.97],
	["2011-09-13",1679.56], ["2011-09-14",3538.43], ["2011-09-15",3118.01], ["2011-09-16",4198.97],
	["2011-09-17",3020.44], ["2011-09-18",3383.45], ["2011-09-19",2148.91], ["2011-09-20",3058.82],
	["2011-09-21",3752.88], ["2011-09-22",3972.03], ["2011-09-23",2923.82], ["2011-09-24",2920.59],
	["2011-09-25",2785.93], ["2011-09-26",4329.7], ["2011-09-27",3493.72], ["2011-09-28",4440.55],
	["2011-09-29",5235.81], ["2011-09-30",6473.25]],
	
	new_visit: [["2011-08-01",396.01], ["2011-08-02",310.5], ["2011-08-03",327.8], ["2011-08-04",408.48],
	["2011-08-05",220.36], ["2011-08-06",119.47], ["2011-08-07",233.82], ["2011-08-08",160.55], ["2011-08-09",793.19],
	["2011-08-10",501], ["2011-08-11",1060.68], ["2011-08-12",628.65], ["2011-08-13",464.26], ["2011-08-14",295.55],
	["2011-08-15",333.12], ["2011-08-16",900], ["2011-08-17",1472.25], ["2011-08-18",561.98], ["2011-08-19",708.67],
	["2011-08-20",946.23], ["2011-08-21",193], ["2011-08-22",260.25], ["2011-08-23",257.8], ["2011-08-24",539.5],
	["2011-08-25",1056.14], ["2011-08-26",933.01], ["2011-08-27",511.63], ["2011-08-28",735.01], ["2011-08-29",985.35],
	["2011-08-30",1101.58], ["2011-08-31",1077], ["2011-09-01",923.66], ["2011-09-02",1142.31], ["2011-09-03",1099.24],
	["2011-09-04",1006.29], ["2011-09-06",1200.62], ["2011-09-07",1107.18], ["2011-09-08",1402.38],
	["2011-09-09",3118.48], ["2011-09-10",1688.11], ["2011-09-11",1085.89], ["2011-09-12",2081.97],
	["2011-09-13",1079.56], ["2011-09-14",1038.43], ["2011-09-15",2518.01], ["2011-09-16",2698.97],
	["2011-09-17",2020.44], ["2011-09-18",2383.45], ["2011-09-19",2148.91], ["2011-09-20",2758.82],
	["2011-09-21",2752.88], ["2011-09-22",2972.03], ["2011-09-23",2323.82], ["2011-09-24",2420.59],
	["2011-09-25",1785.93], ["2011-09-26",3329.7], ["2011-09-27",2993.72], ["2011-09-28",3540.55],
	["2011-09-29",3935.81], ["2011-09-30",4073.25]]
}
var gcColor = ["#268dea","#50b576","#ff8c00","#fb3e46","#3366cc","#109618","#dc3912","#ff9900","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#dddddd"];
var chartPadding = {top:35,bottom:35,right:35};
var chartGrid = {
	background: '#f4f4f4',
	drawBorder: false,
	shadow: false,
	gridLineColor: '#ddd',
	gridLineWidth: 1
};
var chartLegend	= {
	renderer: $.jqplot.EnhancedLegendRenderer,
	show: true,
	location:'nw',
	rendererOptions: {
		numberRows:1
	}
};
var chartSeriesDefault = {
	fill: true,
	fillAndStroke: true,
	breakOnNull:true,
	fillAlpha:0.1,
	lineWidth: 1.5,
	showMarker: false,
	shadow:false,
	rendererOptions: {
		smooth: true,
		animation: {
			//show: true
		}
	},
	markerOptions:{
		style:'filledCircle',
		size:0,
		shadow:false
	},
	pointLabels: {
		show: true,
		hideZeros: true,
		formatString: "%'d",
		fontSize:10
	},
}
var chartAxesDefault = {
	pad:0,
	drawMajorGridlines: true,
	rendererOptions: {
		baselineWidth: 0.5,
		baselineColor: '#000',
		drawBaseline: false
	}
}
var chartHighlighter = {
	show:false,
	showTooltip: false,
	showMarker:false,
	tooltipAxes:'xly',
	useAxesFormatters :true,
	formatString:'%s<br><strong>%s</strong>: %s',// formatString order = tooltipAxes order
	tooltipLocation:'auto'
}
var chartCursor = {
	show:true,
	showTooltip:true,
	tooltipLocation:'auto',
	followMouse:true,
	showVerticalLine:true,
	showCursorLegend:false,
	intersectionThreshold:10,
	showTooltipDataPosition:true,
	useAxesFormatters:true,
	tooltipAxes:'ly',
	tooltipFormatString:'<span style="color:#fff;">%s: <strong>%s</strong></span>',// formatString order = tooltipAxes order
	tooltipSeparator:',',
	tooltipOffset:15,
	showHighlight:true,
	snapToData:true
}
var chartSeries = [
	{
		label: 'Orders'
	},
	{
		label: 'Unique Visitor',
		markerOptions:{
			style:'filledSquare',
			size:4
		}
	},
	{
		label: 'New Visitor',
		lineWidth: 1,
		markerOptions:{
			style:'filledSquare',
			size:4
		}
	}
]
var chartAxes = {
	xaxis: {
		//renderer: $.jqplot.DateAxisRenderer,
		tickRenderer: $.jqplot.CanvasAxisTickRenderer,
		tickOptions: {
			formatString: "%b %e",
			showMark: true
		},
		//min: "2011-08-15",
		//max: "2011-09-30",
	},
	yaxis: {
		labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
		tickOptions: {
			formatString: "%'d",
			showMark: true
		}
	}
}
var allDataSeries = [dataset['orders']];
function addSeriesToPlot(elm,seriesData) {
	if (seriesData) {
		$(elm).empty();
    	allDataSeries.push(seriesData);
	
		var chartOptions = {
			seriesColors: gcColor,
			gridPadding:chartPadding,
			grid: chartGrid,
			legend: chartLegend,
			seriesDefaults: chartSeriesDefault,
			series: chartSeries,
			axesDefaults: chartAxesDefault,
			axes: chartAxes,
			highlighter: chartHighlighter,
			cursor: chartCursor
		}
		//plot1 = $.jqplot("chart-month", allDataSeries, chartOptions);
	}
}
$(document).ready(function () {
	  var containerWidth = $("#chart-month").width();
	  var barWidth=(containerWidth/num_cols)*0.5;		
	  
	  var plot1 = $.jqplot('chart-rekap', rekap_stacked, {
		stackSeries: true,
		seriesColors: ["#50b576","#ff8c00"],
		gridPadding:chartPadding,
		grid: chartGrid,
		legend: chartLegend,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
            rendererOptions: {
				 barMargin: 30,
				//fillToZero: true,
				//barWidth:barWidth,
				//barPadding:-barWidth
			},
			shadow:false,
		},
		series:[
				//{label:'TOP',renderer:$.jqplot.BarRenderer},
				{label:'NYATA'/*,renderer:$.jqplot.BarRenderer*/},
				{label:'KURANG/LEBIH'/*,renderer:$.jqplot.BarRenderer*/}
		],
		//axesDefaults: chartAxesDefault,
		axes: {
		  xaxis: {
			renderer: $.jqplot.CategoryAxisRenderer,
			ticks: rekap_series
		  },
		  yaxis: {
			//padMax:2  
			//renderer: $.jqplot.LogAxisRenderer
		  }
		},
		highlighter: chartHighlighter,
		cursor: chartCursor
	  });
	  
	  
	  var plot2 = $.jqplot('chart-month', umur, {
		seriesColors: gcColor,
		gridPadding:chartPadding,
		grid: chartGrid,
		legend: chartLegend,
		seriesDefaults:{
			renderer:$.jqplot.BarRenderer,
			shadow:false,
		},
		series:[
				{label:'PA'},
				{label:'BA'},
				{label:'TA'}
		],
		axesDefaults: chartAxesDefault,
		axes: {
		  xaxis: {
			renderer: $.jqplot.CategoryAxisRenderer
		  },
		  yaxis: {
			padMax:1  
		  }
		},
		highlighter: chartHighlighter,
		cursor: chartCursor
	  });


	//addSeriesToPlot("#chart-month",dataset['visitor']);
	$("#chart-series-add").click(function() {
		//addSeriesToPlot("#chart-month",dataset['new_visit']);
	});
	
	$('.jqplot-highlighter-tooltip').addClass('ui-corner-all');
	
	//var p1 = [['Free',28467.534,'28.468 Ton'],['Basic',10459.635,'10.460 Ton'],['Premium',1579.9,'1.580 Ton'],['Invited',43539.672,'43.540 Ton'],['Others',172,'172 Ton']];
	plotpie1 = $.jqplot('pie1', [p1], {
		seriesColors: gcColor,
		gridPadding:{top:5,left:5,right:15,bottom:0},
		seriesDefaults:{
			renderer:$.jqplot.PieRenderer,
			shadow: false,
			rendererOptions: { sliceMargin: 1, padding: 8, showDataLabels: true, dataLabelFormatString: "<font style='color:#fff;font-size:9px'>%d%</font>" }
		},
		grid: {
			background: 'rgba(57,57,57,0.0)',
			drawBorder: false,
			shadow: false,
			gridLineColor: '#999',
			gridLineWidth: 1
		},
		legend:{
			show:true,
			background:'transparent',
			border:'0px',
			location:'e',
			rendererOptions: {
				numberRows: 10
			}, 
			marginTop: '15px'
		},
		highlighter: {
			show: true,
			formatString: "%s %s",
			tooltipLocation: 'auto',
			useAxesFormatters: false
		}
	});
	  
	  
	  
	$(window).bind('resize', function() {
		plot1.replot( { resetAxes: true, axes  : { xaxis : { min: "2011-08-15",	max: "2011-09-30" }}} );
	});
});